function init(){var ustream_iframe='<iframe src="http://www.ustream.tv/embed/'+ustream_id+'?v=3&html5ui=1&autoplay=true&locale=en_US&autoResize=true&enablejsapi=true&quality=best&volume=0" id="ustream"></iframe>';wrapper.innerHTML=ustream_iframe,ustream=$$("ustream"),ustream_player=UstreamEmbed("ustream"),ustream_player.addListener("live",live),ustream_player.addListener("offline",offline),ustream_player.callMethod("quality",16),"map"===window.location.search.substr(1)?(initMap(),setInterval(function(){ajax("https://api.wheretheiss.at/v1/satellites/25544",function(str){var json=eval("(function(){return "+str+";})()");updateMarker(json)})},5555)):$$("map").remove()}function offline(){R("vimeo"),wrapper.innerHTML+=vimeo_iframe,ustream.className="hide",vimeo=$$("vimeo"),vimeo_player=$f(vimeo),vimeo_player.addEvent("ready",function(){vimeo_player.api("setVolume",0)}),log("Offline")}function live(){ustream_player.callMethod("play"),log("Live")}function playing(){log("Playing")}function R(a){var b=G(a);b.parentElement.removeChild(b)}function $$(a){return D.getElementById(a)}function ajax(a,b){var c,b=b||function(){};W.XDomainRequest?(c=new XDomainRequest,c.onerror=function(){},c.onprogress=function(){},c.onload=b(c.responseText),c.open("GET",a),c.send()):(c=new XMLHttpRequest,c.onreadystatechange=function(){4==c.readyState&&200==c.status&&b(c.responseText)},c.open("GET",a,!0),c.send())}function initMap(){var a={zoom:1,scrollwheel:!1,navigationControl:!1,scaleControl:!1,streetViewControl:!1,draggable:!1,mapTypeControl:!1,panControl:!1,zoomControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.ROADMAP},b=[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}];map=new google.maps.Map($$("map"),a),map.setOptions({styles:b}),nite.init(map)}function addMarker(a){var b=new google.maps.LatLng(a.latitude,a.longitude);image={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABNElEQVR4AVWRMWvCUBSFj9HXpyYhIhEnB0Ww7dBfII5CJ4cW2qUdHF7BXZAiCC0VOtlf0cWpk5N/oquLHZxtt069Pe01kJwjJHnnu+/ivcgod3CiTJSHgUWRtjD88tKgx6MSoqA2aT+fNOuowMcRIUX4MDyI38/FqTeDfgMhEU+BPKvj7QWjO5nJXEbi9rfDFgIU9A6D6L/6XrYi1KcsxH1cogpLgD8b1ITVjBN9y1jctMObPQIoTtoEZpLWq7hVF/4BmB8TeMoAS3HrXgLYZp3ASL4k0Y88iJufokyAMqhsBkQW7K3xm7jdFWIOLad/0+839jdExuy9lEe+uZczhDAKeBxJOGz9TUK9u2YcwTJJ9kAkQHXaWXXXPfaOETLWUStCtsCjEny6zN4muyyFiKnTK/8Fwa2dfmyRmmYAAAAASUVORK5CYII=",anchor:new google.maps.Point(0,8)},marker=new google.maps.Marker({position:b,map:map,icon:image})}function updateMarker(a){if("undefined"!=typeof a){marker||addMarker(a),log("updating to: "+a.latitude+","+a.longitude);var b=new google.maps.LatLng(a.latitude,a.longitude);marker.setPosition(b),map.setCenter(b),nite.refresh()}}function log(a){try{console.log(a)}catch(a){}}!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();var UstreamEmbed=function(){function a(a){return b(a)}function b(a){var b=c(a),m=function(a){function b(b){if("socialstream"!==b){if(!v)return x||(x=[]),void x.push(arguments);var d=i(arguments).slice(1);d[0]&&"function"==typeof d[0]&&(y[b]||(y[b]=[]),y[b].push(d[0])),g(a,s,{cmd:b,args:d})}else if(j(window,"message",n),u=c(arguments[1]),t=h(u.getAttribute("src")),w=!0,A.length)for(var e=0,k=A.length;e<k;e++)f(A[e])}function m(){if(x){for(;x.length;)b.apply(this,x.shift());x=null}}function n(a){var b=u;b&&b.contentWindow&&b.contentWindow===a.source?r.onmessage(a):a.source===u.id&&r.onmessage(a)}function o(a){var c,d=JSON.parse(a.data);return d.cmd&&"ready"==d.cmd?void g(u,t,{cmd:"ready"}):(c=[d.cmd],c=c.concat(d.args),void b.apply(this,c))}function p(){v=!0,m()}function q(){b.apply(this,arguments)}var r,s,t,u,v=!1,w=!1,x=[],y={},z={},A=[];return s=h(a.getAttribute("src")),r={host:s,callMethod:q,getProperty:function(){q.apply(this,arguments)},addListener:function(a,b){z[a]||(z[a]=[]),z[a].push(b)},removeListener:function(a,b){if(b)for(var c=0,d=z[a].length;c<d;c++)z[a][c]===b&&z[a].splice(c,1);else z[a]=null},onmessage:function(a){var b;if(s||t||A.push({origin:a.origin,data:a.data}),a.origin==s){try{b=JSON.parse(a.data)}catch(a){return}if(b.sstream)return void o(a);if(b.event&&b.event.ready&&(p(),d(z,"ready")),b.event&&b.event.live===!0)return void d(z,"live");if(b.event&&b.event.live===!1)return void d(z,"offline");if(b.event&&!b.event.ready)if(k)Object.keys(b.event).forEach(function(a){d(z,a,b.event[a])});else for(var c in b.event)b.event.hasOwnProperty(c)&&d(z,c,b.event[c]);if(b.property)if(k)Object.keys(b.property).forEach(function(a){e(y,a,b.property[a])});else for(var c in b.property)b.property.hasOwnProperty(c)&&e(y,c,b.property[c])}else if(w&&a.origin==t)return void o(a)},destroy:function(){v=!1,s="",w=!1,t="",u=null,x=[],y={},z={},A=[],l[a.id]&&(l[a.id]=null),a=null}}}(b);return b.id||(b.id="UstreamEmbed"+Math.ceil(1e5*Math.random())),m.id=b.id,l[b.id]=m,m}function c(a){return"string"==typeof a&&(a=document.getElementById(a)),a}function d(a,b,c){for(var d in a[b])a[b].hasOwnProperty(d)&&a[b][d].call(window,b,c)}function e(a,b,c){if(a[b]){for(var d in a[b])a[b].hasOwnProperty(d)&&a[b][d].call(window,c);a[b]=null,delete a[b]}}function f(a){var b,c;for(b in l)l.hasOwnProperty(b)&&l[b]&&(c=document.getElementById(b),c&&c.contentWindow?c.contentWindow===a.source&&l[b].onmessage(a):"string"==typeof a.source&&a.source==b&&l[b].onmessage(a))}function g(a,b,c){a.contentWindow.postMessage(JSON.stringify(c),b)}function h(a){return a.indexOf("http")<0&&(a=location.protocol+a),a.match(m)[1].toString()}function i(a){return Array.prototype.slice.call(a,0)}function j(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}var k="undefined"!=typeof Object.keys,l={},m=new RegExp("^(http(?:s)?://[^/]+)","im");return j(window,"message",f),window.UstreamEmbed=a}(),nite={map:null,date:null,marker_sun:null,marker_shadow:null,marker_shadow_lite:null,shadow_radius:parseInt(6371*Math.PI*500),sun_position:null,init:function(a){if("undefined"==typeof google||"undefined"==typeof google.maps)throw"Nite Overlay: no google.maps detected";this.map=a,this.refreshSunZenith(),this.marker_shadow=new google.maps.Circle({map:this.map,center:this.getShadowPosition(),radius:this.shadow_radius,fillColor:"#000",fillOpacity:.1,strokeOpacity:0,clickable:!1,editable:!1}),this.marker_shadow_lite=new google.maps.Circle({map:this.map,center:this.getShadowPosition(),radius:.96*this.shadow_radius,fillColor:"#000",fillOpacity:.1,strokeOpacity:0,clickable:!1,editable:!1})},getShadowPosition:function(){return new google.maps.LatLng(-this.sun_position.lat(),-this.sun_position.lng()+180)},refresh:function(){this.isVisible()&&(this.refreshSunZenith(),this.marker_shadow.setCenter(this.getShadowPosition()),this.marker_shadow_lite.setCenter(this.getShadowPosition()))},refreshSunZenith:function(){var a=.017453292519943295,b=new Date;this.date&&(b=new Date(this.date)),b=new Date(b.getTime()+6e4*b.getTimezoneOffset());var c=(60*b.getHours()+b.getMinutes())/1440,d=2415018.5-(new Date("01/01/1900 00:00:00 UTC").getTime()-b.getTime())/1e3/60/60/24,e=(d-2451545)/36525,f=(280.46646+e*(36000.76983+3032e-7*e))%360,g=357.52911+e*(35999.05029-1537e-7*e),h=Math.sin(a*g)*(1.914602-e*(.004817+14e-6*e))+Math.sin(2*a*g)*(.019993-101e-6*e)+289e-6*Math.sin(3*a*g),i=f+h,j=i-.00569-.00478*Math.sin(125.04*a-1934.136*e),k=23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60,l=k+.00256*Math.cos(125.04*a-1934.136*e),m=Math.asin(Math.sin(a*l)*Math.sin(a*j))/a,n=.016708634-e*(42037e-9+1.267e-7*e),o=Math.tan(a*(l/2))*Math.tan(a*(l/2)),p=4*((o*Math.sin(2*a*f)-2*n*Math.sin(a*g)+4*n*o*Math.sin(a*g)*Math.cos(2*a*f)-.5*o*o*Math.sin(4*a*f)-1.25*n*n*Math.sin(2*a*g))/a),q=(1440*c+p)%1440,r=q/4<0?q/4+180:q/4-180;this.sun_position=new google.maps.LatLng(m,r)},setDate:function(a){this.date=a,this.refresh()},setMap:function(a){this.map=a},show:function(){this.marker_shadow.setVisible(!0),this.marker_shadow_lite.setVisible(!0),this.refresh()},hide:function(){this.marker_shadow.setVisible(!1),this.marker_shadow_lite.setVisible(!1)},isVisible:function(){return this.marker_shadow.getVisible()}},D=document,W=window,vimeo,vimeo_player,ustream,ustream_player,wrapper,map,bounds,marker=!1,vimeo_iframe='<iframe src="http://player.vimeo.com/video/95002726?html5ui=1&autoplay=true&badge=0&byline=0&color=000000&loop=1&portrait=0&title=0&api=1&player_id=vimeo&hd=1" id="vimeo"></iframe>',ustream_ids=["17074538","9408562"],h=window.location.hash.substr(1),ustream_id=h&&h.length>0?h:ustream_ids[0];window.location.hash=ustream_id,$(function(){wrapper=$$("wrapper"),init()}),$("switch").on("click",function(a){a.preventDefault();var b=ustream_id===ustream_ids[0];ustream_id=b?ustream_ids[1]:ustream_ids[0],window.location.hash=ustream_id,document.location.reload(!1)});